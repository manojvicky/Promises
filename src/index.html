<!DOCTYPE html>
<html>

<head>
	<title>SBA</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<style type="text/css">
		.benefits {
			min-height: 300px;
			text-align: center;
			padding: 3% 0;
		}

		.benefits p {
			margin-bottom: 10%;
		}

		.benefits p:first-child {
			font-weight: bold;
		}

		#insuranceA,
		#insuranceB {
			background: white;
			padding: 1% 0;
			text-align: center;
			height: 300px;
		}

		.list {
			border: 1px solid #000;
			margin: 4px;
		}
        .errorName , .errorCars , .errorNumber , .errorState , .errorFuel{
        color: red;
        }
        .formInsurance > .row {
            margin-bottom: 10px;
        }
        .formInsurance > .row > .col-lg-4{
            margin-bottom: 5px;
        }

        .btn-primary {
            color: #fff;
            background-color: #337ab7;
            width: 100%;
            height: 32px;
            border: 0px;
            border-radius: 2px;
        }
    </style>
    <script>
            $(document).ready(function () {
                $.ajax({
                    url: "./src/car.json",
                    type: "GET",
                    success: function (car) {
                        console.log(car);
                        for (var i = 0; i < car.data.length; i++) {
                            console.log(car.data[i].name);
                            $("#cars").append('<option>' + car.data[i].name + '</option>');
                        }
                    }
                })
                $.ajax({
                    url: "./src/fuel.json",
                    type: "GET",
                    success: function (fuel) {
    
                        console.log(fuel);
                        for (var i = 0; i < fuel.data.length; i++) {
                            console.log(fuel.data[i].name);
                            $("#fuel").append('<option>' + fuel.data[i].name + '</option>');
                        }
                    }
                })
    
                $.ajax({
                    url: "./src/state.json",
                    type: "GET",
                    success: function (state) {
    
                        console.log(state);
                        for (var i = 0; i < state.data.length; i++) {
                            console.log(state.data[i].name);
                            $("#state").append('<option>' + state.data[i].name + '</option>');
                        }
                    }
                })
    
    
            });
            function showInsuranceForm() {
    
                if ($('input#getInsurance[type="radio"]').is(':checked')) {
                    $('.formInsurance').removeClass('hidden');
                }
    
            }
            function getInsurance() {
                var carVal = $('#cars').val();
                var fuelVal = $('#fuel').val();
                var stateVal = $('#state').val();
                var cusName = $('#cusName').val();
                var phVal = $('#cusNum').val();
                var status = false;
                if (carVal !== 'Select a car type') {
                    status = true;
                    $('.errorCars').addClass('hidden');
                } else {
                    status = false;
                    $('.errorCars').removeClass('hidden');
                }
    
                if (fuelVal !== 'Select a fuel type') {
                    status = true;
                    $('.errorFuel').addClass('hidden');
                } else {
                    status = false;
                    $('.errorFuel').removeClass('hidden');
                }
    
                if (stateVal !== 'Select a state') {
                    status = true;
                    $('.errorState').addClass('hidden');
                } else {
                    status = false;
                    $('.errorState').removeClass('hidden');
                }
    
                if (cusName.length !== 0 && cusName.length > 2 && cusName.length <= 50) {
                    status = true;
                    $('.errorName').addClass('hidden');
                } else {
                    status = false;
                    $('.errorName').removeClass('hidden');
                }
                if (phVal.length !== 0 && phVal.length == 10) {
                    status = true;
                    $('.errorNumber').addClass('hidden');
                } else {
                    status = false;
                    $('.errorNumber').removeClass('hidden');
                }
                if (status) {
                    $('.formInsurance').addClass('hidden');
                    $('.benefits').addClass('hidden');
                    $('.buyInsurance').removeClass('hidden');
    
                    $.ajax({
                        url: "./src/insurance.json",
                        type: "GET",
                        success: function (insurance) {
                            //alert(insurance.data.length);
                            console.log(insurance);
                            for (var i = 0; i < insurance.data.length; i++) {
                                console.log(insurance.data[i]);
                                $("#insuranceA").append("<div id='list" + i + "' class='list' draggable='true' ondragstart='drag(event)'><p>" + insurance.data[i].name + "</p><p>" + insurance.data[i].amount + "</p></div>");
                            }
                        }
                    })
    
                }
                
            }
    
            function allowDrop(ev) {
                ev.preventDefault();
            }
    
            function drag(ev) {
                ev.dataTransfer.setData("text", ev.target.id);
            }
    
            function drop(ev) {
                ev.preventDefault();
                var data = ev.dataTransfer.getData("text");
    
                ev.target.append(document.getElementById(data));
            }
            function buyInsurance(e){
                console.log("buyInsurance", e)
                alert("You Buy the insurance");
            }
    </script>
</head>

<body>
	<div class="container-fluid Insurance">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 bg-info" style="min-height:350px;margin-right: 2%;">
					<div class="row">
						<div class="col-lg-12">
							<input type="radio" id="getInsurance" onchange="showInsuranceForm()"> Get New Insurance
						</div>
					</div>
					<div class="formInsurance hidden">
                            <div class="row">
                                    <div class="col-lg-4">
                                        <select id="cars" class="custom-select form-control">
                                            <option>
                                                Select a car type
                                            </option>
                                        </select>
                                        <span class="errorCars hidden">
                                        Please enter Car Type    
                                        <span>
                                    </div>
                                    <div class="col-lg-4">
                                        <select id="fuel" class="custom-select form-control">
                                            <option>Select a fuel type</option>
                                        </select>
                                        <span class="errorFuel hidden">
                                            Please enter Fuel Type    
                                        <span>
                                    </div>
                                    <div class="col-lg-4">
                                        <select id="state" class="custom-select form-control">
                                            <option>Select a state</option>
                                        </select>
                                        <span class="errorState hidden">
                                            Please enter State    
                                        <span>
                                    </div>
        
                                </div>
                                <div class="row">
                                    <div class="col-lg-4">
                                        <input id="cusName" class="form-control" placeholder="Customer Name" type="text">
                                        <span class="errorName hidden">
                                                Please enter Name    
                                        <span>
                                    </div>
                                    <div class="col-lg-4">
                                        <input id="cusNum" class="form-control" placeholder="Phone number" type="text">
                                        <span class="errorNumber hidden">
                                            Please enter Number    
                                        <span>
                                    </div>
                                    <div class="col-lg-4">
                                        <button class="bth btn-primary" onclick="getInsurance()">
                                            Get Insurance
                                        </button>
                                    </div>
        
                                </div>
					</div>
					<div class="buyInsurance hidden">
						<div class="row">
							<div class="col-lg-4">
								<div id="insuranceA" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
							</div>
							<div class="col-lg-4">
								<div id="insuranceB" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
							</div>
							<div class="col-lg-4">
								<button class="btn btn-primary" onclick="buyInsurance()"> Buy Insurance</button>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-3 bg-info benefits" style="min-height:350px; margin-right: 2%;">
					<p>Benifits</p>
					<p>Quick</p>
					<p>Easy</p>
					<p>Fast</p>

				</div>

			</div>

		</div>
	</div>
	<script type="text/javascript" src="main.js"></script>
</body>

</html>